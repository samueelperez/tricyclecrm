const { createClient } = require("@supabase/supabase-js"); require("dotenv").config(); async function main() { try { const supabase = createClient(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY); console.log("Consultando la estructura de la tabla proformas..."); await supabase.from("proformas").select("*").limit(0).then(({ data, error }) => { if (error) { console.error("Error consultando proformas:", error); } else { console.log("La tabla proformas existe pero no tiene registros."); } }); console.log("
Intentando insertar una proforma de prueba..."); const proformaEjemplo = { numero: "PRO-" + Date.now().toString().slice(-6), fecha: new Date().toISOString().split("T")[0], monto_total: 5000 }; const { data: nuevaProforma, error: errorInsercion } = await supabase.from("proformas").insert([proformaEjemplo]).select(); if (errorInsercion) { console.error("Error al insertar proforma:", errorInsercion); } else { console.log("Proforma insertada con Ã©xito:", nuevaProforma); } } catch (err) { console.error("Error general:", err); } } main();
